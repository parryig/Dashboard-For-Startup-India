{% extends "dipp/base.html" %}
{% load static %}

<script src="//code.jquery.com/jquery-1.11.1.min.js"></script>
{% block content %}
<div id="page-wrapper">
<div class="container-fluid ">
<div class="row d-flex justify-content-center">
    <div class="col-lg-12">
        <h1 class="page-header text-center">Add Target</h1>
    </div>
    <!-- /.col-lg-12 -->
    <!-- form -->
    <div class="col-sm-8 ">
    <form role="form" method="post" id="target_form" data-cities-url="{% url 'ajax_load_action' %}" action="{% url 'add_target_action' %}"> <!--action="{% url 'add_target_action' %}"-->
      {% csrf_token %}
      <div class="form-group" >
          <label>Department Name</label>
          <select class="form-control" name="department" id="dept" >
            {% for department in d %}
            <option value="{{department.dept_loginid}}" class="form-control">department: {{department.dept_name}}</option>
            {% endfor %}

          </select>

      </div>
      <div class="form-group">
        <label>Select relevant action point</label>
        <select class="form-control" name="actionpoint"  id="action" required>

        </select>
      </div>
          <div class="form-group" >
              <label>End Date</label>
              <input class="form-control"   placeholder="" type="date" min="{{date}}" required name="m_date" >
          </div>
          <div class="form-group" >
              <label>Enter Target</label>
              <textarea class="form-control"   placeholder="enter target" type="text" min="{{date}}" required name="target" ></textarea>
          </div>


          <button type="submit" class="btn btn-block text-white align-middle bg-gradient-primary">Add</button>
    </form>
</div>
    <!-- end form-->
</div>
</div>
</div>


<script type="text/javascript" src="{% static 'dipp/js/dynamic_input.js' %}"></script>
<!-- <script src="https://code.jquery.com/jquery-3.3.1.min.js"></script> -->
  <script>
    $("#dept").on('change', function() {
      var url = $("#target_form").attr("data-cities-url");  // get the url of the `load_cities` view
      var dept = $(this).val(); 

      $.ajax({                       // initialize an AJAX request
        url: url,                    // set the url of the request (= localhost:8000/hr/ajax/load-cities/)
        data: {
          'dept': dept       // add the country id to the GET parameters
        },
        success: function (data) {   // `data` is the return of the `load_cities` view function
          $("#action").html(data);  // replace the contents of the city input with the data that came from the server
        }
      });

    });
  </script>




{% endblock %}
